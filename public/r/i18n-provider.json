{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "i18n-provider",
  "title": "i18n Provider",
  "description": "Global currency conversion and localized formatting provider",
  "dependencies": ["lucide-react", "motion"],
  "registryDependencies": ["button", "card", "select", "utils"],
  "files": [
    {
      "path": "src/lib/i18n-provider.tsx",
      "content": "\"use client\";\n\nimport React, {\n  createContext,\n  useContext,\n  useMemo,\n  useState,\n  useEffect,\n} from \"react\";\n\nexport type Locale = string;\nexport type Currency = string;\n\ninterface BillingContextType {\n  locale: Locale;\n  currency: Currency;\n  rates: Record<string, number>;\n  setLocale: (locale: Locale) => void;\n  setCurrency: (currency: Currency) => void;\n  formatCurrency: (\n    amount: number | string,\n    options?: { from?: Currency },\n  ) => string;\n  convert: (amount: number, from: Currency, to: Currency) => number;\n}\n\nconst BillingContext = createContext<BillingContextType | undefined>(undefined);\n\nconst STATIC_RATES = {\n  USD: 1.0,\n  AUD: 1.4312,\n  BRL: 5.2372,\n  CAD: 1.3666,\n  CHF: 0.77794,\n  CNY: 6.939,\n  CZK: 20.553,\n  DKK: 6.3314,\n  EUR: 0.84789,\n  GBP: 0.73588,\n  HKD: 7.8135,\n  HUF: 320.46,\n  IDR: 16873,\n  ILS: 3.1301,\n  INR: 90.66,\n  ISK: 123.11,\n  JPY: 157.09,\n  KRW: 1467.42,\n  MXN: 17.3639,\n  MYR: 3.9475,\n  NOK: 9.7249,\n  NZD: 1.6681,\n  PHP: 58.544,\n  PLN: 3.5768,\n  RON: 4.3174,\n  SEK: 9.0499,\n  SGD: 1.2732,\n  THB: 31.6,\n  TRY: 43.615,\n  ZAR: 16.1243,\n};\n\nexport function BillingProvider({\n  children,\n  defaultLocale = \"en-US\",\n  defaultCurrency = \"USD\",\n}: {\n  children: React.ReactNode;\n  defaultLocale?: Locale;\n  defaultCurrency?: Currency;\n}) {\n  const [locale, setLocale] = useState<Locale>(defaultLocale);\n  const [currency, setCurrency] = useState<Currency>(defaultCurrency);\n  const [rates, setRates] = useState<Record<string, number>>(STATIC_RATES);\n\n  // Fetch exchange rates from Frankfurter\n  useEffect(() => {\n    const fetchRates = async () => {\n      try {\n        const response = await fetch(\n          \"https://api.frankfurter.dev/v1/latest?base=USD\",\n        );\n        const data = await response.json();\n        if (data.rates) {\n          setRates({ USD: 1, ...data.rates });\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch exchange rates:\", error);\n      }\n    };\n    fetchRates();\n  }, []);\n\n  const convert = useMemo(() => {\n    return (amount: number, from: Currency, to: Currency) => {\n      if (from === to) return amount;\n\n      // Fallback: If rates aren't loaded or currency missing, return original amount\n      if (!rates[from] && from !== \"USD\") return amount;\n      if (!rates[to] && to !== \"USD\") return amount;\n\n      // Convert to USD (base) first, then to target\n      const amountInUSD = from === \"USD\" ? amount : amount / (rates[from] || 1);\n      const targetAmount =\n        to === \"USD\" ? amountInUSD : amountInUSD * (rates[to] || 1);\n\n      return targetAmount;\n    };\n  }, [rates]);\n\n  const formatCurrency = useMemo(() => {\n    return (amount: number | string, options?: { from?: Currency }) => {\n      let value = typeof amount === \"string\" ? parseFloat(amount) : amount;\n      if (isNaN(value)) return amount.toString();\n\n      // Auto-convert if 'from' is specified and different from current currency\n      if (options?.from && options.from !== currency) {\n        value = convert(value, options.from, currency);\n      }\n\n      return new Intl.NumberFormat(locale, {\n        style: \"currency\",\n        currency: currency,\n      }).format(value);\n    };\n  }, [locale, currency, convert]);\n\n  const value = useMemo(\n    () => ({\n      locale,\n      currency,\n      rates,\n      setLocale,\n      setCurrency,\n      formatCurrency,\n      convert,\n    }),\n    [locale, currency, rates, formatCurrency, convert],\n  );\n\n  return (\n    <BillingContext.Provider value={value}>{children}</BillingContext.Provider>\n  );\n}\n\nexport function useBilling() {\n  const context = useContext(BillingContext);\n  if (context === undefined) {\n    throw new Error(\"useBilling must be used within a BillingProvider\");\n  }\n  return context;\n}\n",
      "type": "registry:lib",
      "target": "lib/i18n-provider.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/i18n-demo.tsx",
      "content": "\"use client\";\n\nimport React from \"react\";\nimport { useBilling, BillingProvider } from \"@/lib/i18n-provider\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function I18nDemo() {\n  return (\n    <BillingProvider>\n      <Card className=\"mx-auto w-full max-w-md\">\n        <CardHeader>\n          <CardTitle className=\"text-xl\">Currency Conversion Demo</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex flex-col gap-2\">\n            <label className=\"text-muted-foreground text-sm font-medium\">\n              Select Currency\n            </label>\n            <DemoControls />\n          </div>\n\n          <div className=\"space-y-4 border-t pt-4\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Base Price (USD)</span>\n              <span className=\"font-medium\">$99.00</span>\n            </div>\n            <PriceDisplay />\n          </div>\n\n          <div className=\"bg-muted/50 space-y-3 rounded-lg p-4\">\n            <p className=\"text-muted-foreground text-xs font-semibold tracking-wider uppercase\">\n              Automatic Conversions\n            </p>\n            <AutomaticConversions />\n          </div>\n\n          <p className=\"text-muted-foreground text-center text-[10px] italic\">\n            Rates are fetched in real-time from the Frankfurter API.\n          </p>\n        </CardContent>\n      </Card>\n    </BillingProvider>\n  );\n}\n\nfunction DemoControls() {\n  const { currency, setCurrency } = useBilling();\n  const currencies = [\"USD\", \"EUR\", \"GBP\", \"JPY\", \"INR\", \"CAD\", \"AUD\"];\n\n  return (\n    <Select value={currency} onValueChange={setCurrency}>\n      <SelectTrigger>\n        <SelectValue placeholder=\"Select currency\" />\n      </SelectTrigger>\n      <SelectContent>\n        {currencies.map((c) => (\n          <SelectItem key={c} value={c}>\n            {c}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n\nfunction PriceDisplay() {\n  const { currency, formatCurrency } = useBilling();\n  return (\n    <div className=\"flex items-center justify-between\">\n      <span className=\"text-sm font-medium\">Local Price ({currency})</span>\n      <span className=\"text-primary text-2xl font-bold\">\n        {formatCurrency(99.0, { from: \"USD\" })}\n      </span>\n    </div>\n  );\n}\n\nfunction AutomaticConversions() {\n  const { formatCurrency } = useBilling();\n  return (\n    <>\n      <div className=\"flex items-center justify-between text-sm\">\n        <span className=\"text-muted-foreground\">Starter Monthly</span>\n        <span className=\"font-mono font-medium\">\n          {formatCurrency(29.0, { from: \"USD\" })}\n        </span>\n      </div>\n      <div className=\"flex items-center justify-between text-sm\">\n        <span className=\"text-muted-foreground\">Pro Annual</span>\n        <span className=\"font-mono font-medium\">\n          {formatCurrency(1990.0, { from: \"USD\" })}\n        </span>\n      </div>\n    </>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/i18n-demo.tsx"
    }
  ],
  "type": "registry:block"
}
