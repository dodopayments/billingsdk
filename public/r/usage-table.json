{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "usage-table",
  "type": "registry:block",
  "title": "Usage Table",
  "description": "Per-model LLM usage with token counts, cache reads, and API cost",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "card",
    "table",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/usage-table.tsx",
      "content": "\"use client\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport {  Card,  CardContent,  CardDescription,  CardHeader,  CardTitle} from \"@/components/ui/card\"\r\nimport {  Table,  TableBody,  TableCell,  TableCaption,  TableHead,  TableHeader,  TableRow} from \"@/components/ui/table\"\r\n\r\nexport interface UsageItem {\r\n    model: string\r\n    inputWithCache: number\r\n    inputWithoutCache: number\r\n    cacheRead: number\r\n    output: number\r\n    totalTokens: number\r\n    apiCost?: number\r\n    costToYou?: number\r\n}\r\n\r\ninterface UsageTableProps {\r\n    className?: string\r\n    title?: string\r\n    description?: string\r\n    usageHistory: UsageItem[]\r\n    showTotal?: boolean\r\n}\r\n\r\nexport function UsageTable({\r\n    className,\r\n    title,\r\n    description,\r\n    usageHistory,\r\n    showTotal = true, // Default to true\r\n}: UsageTableProps) {\r\n\r\n    // Calculate total row if showTotal is true\r\n    const totalRow = showTotal ? usageHistory.reduce((acc, item) => ({\r\n        inputWithCache: acc.inputWithCache + item.inputWithCache,\r\n        inputWithoutCache: acc.inputWithoutCache + item.inputWithoutCache,\r\n        cacheRead: acc.cacheRead + item.cacheRead,\r\n        output: acc.output + item.output,\r\n        totalTokens: acc.totalTokens + item.totalTokens,\r\n        apiCost: acc.apiCost + (item.apiCost || 0),\r\n        costToYou: acc.costToYou + (item.costToYou || 0),\r\n    }), {\r\n        inputWithCache: 0,\r\n        inputWithoutCache: 0,\r\n        cacheRead: 0,\r\n        output: 0,\r\n        totalTokens: 0,\r\n        apiCost: 0,\r\n        costToYou: 0,\r\n    }) : null\r\n\r\n    const formatNumber = (num: number) => {\r\n        return new Intl.NumberFormat().format(num)\r\n    }\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return `$${amount.toFixed(2)}`\r\n    }\r\n    const hasApiCost = usageHistory.some(item => item.apiCost)\r\n    const hasCostToYou = usageHistory.some(item => item.costToYou)\r\n\r\n    return (\r\n        <Card className={cn(\"w-full gap-1 py-3 md:py-6\", className)}>\r\n            <CardHeader className=\"space-y-2 pb-2 md:pb-4 px-3 md:px-6\">\r\n                {title && (\r\n                <div className=\"flex items-center justify-between\">\r\n                    <CardTitle className=\"text-lg font-medium text-foreground flex items-center gap-2\">\r\n                        {title}\r\n                    </CardTitle>\r\n                </div>\r\n                )}\r\n                {description && (\r\n                    <CardDescription className=\"text-sm font-light text-muted-foreground leading-relaxed\">\r\n                        {description}\r\n                    </CardDescription>\r\n                )}\r\n            </CardHeader>\r\n            <CardContent className=\"px-3 md:px-6\">\r\n                <div className=\"overflow-x-auto border rounded-lg\">\r\n                    <Table>\r\n                        <TableCaption className=\"sr-only\">Model usage summary with token counts and costs</TableCaption>\r\n                        <TableHeader>\r\n                            <TableRow className=\"border-muted-foreground/30 bg-muted/50 hover:bg-muted/50\">\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-left whitespace-pre-wrap\">MODEL</TableHead>\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    INPUT (W/ CACHE WRITE)\r\n                                </TableHead>\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    INPUT (W/O CACHE WRITE)\r\n                                </TableHead>\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    CACHE READ\r\n                                </TableHead>\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    OUTPUT\r\n                                </TableHead>\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    TOTAL TOKENS\r\n                                </TableHead>\r\n                                {hasApiCost && (\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    API COST\r\n                                </TableHead>\r\n                                )}\r\n                                {hasCostToYou && (\r\n                                <TableHead className=\"text-muted-foreground text-xs font-semibold text-right whitespace-pre-wrap\">\r\n                                    COST TO YOU\r\n                                </TableHead>\r\n                                )}\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody className=\"overflow-auto\">\r\n                            {usageHistory.length === 0 && (\r\n                                <TableRow className=\"border-muted-foreground/10\">\r\n                                    <TableCell colSpan={8} className=\"h-24 text-center text-muted-foreground pl-6 pr-6\">\r\n                                        No usage data available\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            )}\r\n                            {usageHistory.map((item, index) => (\r\n                                <TableRow key={item.model || index} className=\"\">\r\n                                    <TableCell className=\"font-mono text-foreground\">\r\n                                        {item.model}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatNumber(item.inputWithCache)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatNumber(item.inputWithoutCache)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatNumber(item.cacheRead)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatNumber(item.output)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatNumber(item.totalTokens)}\r\n                                    </TableCell>\r\n                                    {hasApiCost && (\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatCurrency(item.apiCost || 0)}\r\n                                    </TableCell>\r\n                                    )}\r\n                                    {hasCostToYou && (\r\n                                    <TableCell className=\"text-right text-foreground font-mono\">\r\n                                        {formatCurrency(item.costToYou || 0)}\r\n                                    </TableCell>\r\n                                    )}\r\n                                </TableRow>\r\n                            ))}\r\n                            {showTotal && totalRow && (\r\n                                <TableRow className=\"font-medium bg-muted/50 hover:bg-muted/50\">\r\n                                    <TableCell className=\"font-mono  font-semibold\">\r\n                                        Total\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatNumber(totalRow.inputWithCache)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatNumber(totalRow.inputWithoutCache)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatNumber(totalRow.cacheRead)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatNumber(totalRow.output)}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatNumber(totalRow.totalTokens)}\r\n                                    </TableCell>\r\n                                    {hasApiCost && (\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatCurrency(totalRow.apiCost || 0)}\r\n                                    </TableCell>\r\n                                    )}\r\n                                    {hasCostToYou && (\r\n                                    <TableCell className=\"text-right  font-mono font-semibold\">\r\n                                        {formatCurrency(totalRow.costToYou || 0)}\r\n                                    </TableCell>\r\n                                    )}\r\n                                </TableRow>\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}",
      "type": "registry:component",
      "target": "components/billingsdk/usage-table.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/usage-table-demo.tsx",
      "content": "import { UsageTable, type UsageItem } from '@/registry/billingsdk/usage-table';\r\n\r\nexport default function UsageTableDemo() {\r\n  const usageHistory: UsageItem[] = [\r\n    {\r\n      model: 'gpt-5',\r\n      inputWithCache: 0,\r\n      inputWithoutCache: 518131,\r\n      cacheRead: 1646080,\r\n      output: 103271,\r\n      totalTokens: 2267482,\r\n    },\r\n    {\r\n      model: 'claude-3.5-sonnet',\r\n      inputWithCache: 176177,\r\n      inputWithoutCache: 28413,\r\n      cacheRead: 434612,\r\n      output: 8326,\r\n      totalTokens: 647528,\r\n      costToYou: 1.00\r\n    },\r\n    {\r\n      model: 'gemini-2.0-flash-exp',\r\n      inputWithCache: 176100,\r\n      inputWithoutCache: 28432,\r\n      cacheRead: 434612,\r\n      output: 8326,\r\n      totalTokens: 647528,\r\n      apiCost: 1,\r\n      costToYou: 0\r\n    },\r\n    {\r\n      model: 'gemini-2.5-pro',\r\n      inputWithCache: 176177,\r\n      inputWithoutCache: 28413,\r\n      cacheRead: 434612,\r\n      output: 7000,\r\n      totalTokens: 647528,\r\n      apiCost: 1,\r\n      costToYou: 0\r\n    },\r\n    {\r\n      model: 'claude-4-sonnet',\r\n      inputWithCache: 68415,\r\n      inputWithoutCache: 902,\r\n      cacheRead: 864450,\r\n      output: 12769,\r\n      totalTokens: 946536,\r\n      apiCost: 0.71,\r\n      costToYou: 0.71\r\n    },\r\n    {\r\n      model: 'claude-3.7-sonnet',\r\n      inputWithCache: 68415,\r\n      inputWithoutCache: 902,\r\n      cacheRead: 864450,\r\n      output: 12769,\r\n      totalTokens: 946536,\r\n      apiCost: 0.71,\r\n    },\r\n    {\r\n      model: 'auto',\r\n      inputWithCache: 84551,\r\n      inputWithoutCache: 0,\r\n      cacheRead: 284876,\r\n      output: 9458,\r\n      totalTokens: 378885,\r\n      apiCost: 0.23,\r\n      costToYou: 0\r\n    },\r\n    {\r\n      model: 'sonic',\r\n      inputWithCache: 0,\r\n      inputWithoutCache: 149484,\r\n      cacheRead: 4354855,\r\n      output: 23569,\r\n      totalTokens: 4527908,\r\n      costToYou: 2\r\n    }\r\n  ];\r\n\r\n\r\n  return (\r\n      <UsageTable \r\n        title=\"Usage Summary\"\r\n        usageHistory={usageHistory}\r\n        showTotal={true}\r\n        description=\"Per-model LLM usage with token counts, cache reads, and API cost.\"\r\n      />\r\n  );\r\n}",
      "type": "registry:component",
      "target": "components/usage-table-demo.tsx"
    }
  ]
}