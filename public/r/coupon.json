{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "coupon",
  "type": "registry:block",
  "title": "Coupon Generator",
  "description": "A coupon code generator component for billing and promotional purposes",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "card",
    "button",
    "input",
    "switch",
    "label",
    "select"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/coupon.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardHeader, CardTitle, CardContent, CardFooter } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Label } from \"@/components/ui/label\"\nimport { Copy, ArrowLeft, Share2, Scissors } from \"lucide-react\"\nimport {\n    Select,\n    SelectContent,\n    SelectGroup,\n    SelectItem,\n    SelectLabel,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\"\n\nexport interface CouponGeneratorProps {\n    companyName: string\n    applicableOptions?: { label: string; value: string }[]\n    onGenerate: (couponData: {\n        code: string\n        discount: number\n        rule: string\n        startDate?: string\n        endDate?: string\n    }) => void\n    onCopy?: (code: string) => void\n    onShare?: (code: string) => void\n    className?: string\n    cardClassName?: string\n    generateButtonClassName?: string\n    defaultCode?: string\n}\n\nexport function CouponGenerator({\n    companyName,\n    applicableOptions = [],\n    onGenerate,\n    onCopy,\n    onShare,\n    className,\n    cardClassName,\n    generateButtonClassName,\n    defaultCode,\n}: CouponGeneratorProps) {\n    const [enabled, setEnabled] = useState(false)\n    const [startDate, setStartDate] = useState(\"\")\n    const [endDate, setEndDate] = useState(\"\")\n    const [generated, setGenerated] = useState(false)\n    const [customCode, setCustomCode] = useState(\"DODO20\")\n    const [discount, setDiscount] = useState<number | \"\">(20)\n    const [discountError, setDiscountError] = useState(\"\")\n    const [selectedRule, setSelectedRule] = useState(\"\")\n    const [generatedCouponCode, setGeneratedCouponCode] = useState(\"\")\n    const [dateError, setDateError] = useState(\"\")\n\n    const isDateValid = startDate && endDate && new Date(startDate) < new Date(endDate);\n\n    const isDiscountValid = discount !== \"\" && !isNaN(Number(discount)) && Number(discount) >= 0 && Number(discount) <= 100;\n\n    const isFormValid =\n        selectedRule.trim() !== \"\" &&\n        startDate.trim() !== \"\" &&\n        endDate.trim() !== \"\" &&\n        isDateValid &&\n        isDiscountValid;\n\n    function generateCouponCode() {\n        let rnd = Math.floor(Math.random() * 1_000_000);\n        if (typeof crypto !== \"undefined\" && typeof crypto.getRandomValues === \"function\") {\n            const arr = new Uint32Array(1);\n            crypto.getRandomValues(arr);\n            rnd = arr[0] % 1_000_000;\n        }\n        return `COUPON${rnd.toString().padStart(6, \"0\")}`;\n    }\n\n    const handleGenerate = () => {\n        let valid = true;\n\n        if (!selectedRule.trim() || !startDate.trim() || !endDate.trim()) {\n            setDateError(\"Please fill in all required fields: Applicable rule, Start date, and End date\");\n            valid = false;\n        } else if (!isDateValid) {\n            setDateError(\"Start date must be before end date.\");\n            valid = false;\n        } else {\n            setDateError(\"\");\n        }\n\n        if (discount === \"\" || isNaN(Number(discount))) {\n            setDiscountError(\"Discount must be a number.\");\n            valid = false;\n        } else if (Number(discount) < 0) {\n            setDiscountError(\"Discount cannot be negative.\");\n            valid = false;\n        } else if (Number(discount) > 100) {\n            setDiscountError(\"Discount cannot exceed 100%.\");\n            valid = false;\n        } else {\n            setDiscountError(\"\");\n        }\n\n        if (!valid) return;\n\n        let code: string\n        if (enabled && customCode.trim()) {\n            code = customCode.trim()\n        } else if (defaultCode) {\n            code = defaultCode\n        } else {\n            code = generateCouponCode();\n        }\n\n        const couponData = {\n            code,\n            discount: Number(discount),\n            rule: selectedRule,\n            startDate,\n            endDate,\n        }\n\n        setGeneratedCouponCode(code)\n        onGenerate(couponData)\n        setGenerated(true)\n    }\n\n    const handleDiscountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const value = e.target.value;\n        if (value === \"\") {\n            setDiscount(\"\");\n            setDiscountError(\"\");\n            return;\n        }\n        const num = Number(value);\n        if (isNaN(num)) {\n            setDiscountError(\"Discount must be a number.\");\n        } else if (num < 0) {\n            setDiscountError(\"Discount cannot be negative.\");\n        } else if (num > 100) {\n            setDiscountError(\"Discount cannot exceed 100%.\");\n        } else {\n            setDiscountError(\"\");\n        }\n        setDiscount(num); \n    };\n\n    return (\n        <>\n            {generated ? (\n                <Card\n                    className={`w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-4 duration-700 \n                    bg-background text-foreground\n                    border border-border shadow-2xl \n                    ${cardClassName || \"\"}`}\n                >\n                    <CardContent className=\"p-0\">\n                        <div className=\"relative overflow-hidden\">\n                            <div className=\"bg-zinc-900 dark:bg-zinc-100 p-6 relative\">\n                                <div className=\"absolute top-0 left-0 w-full h-full opacity-5\">\n                                    <div className=\"w-full h-full bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(255,255,255,0.1)_10px,rgba(255,255,255,0.1)_20px)]\"></div>\n                                </div>\n                                <div className=\"relative z-10 text-center\">\n                                    <div className=\"inline-flex items-center gap-2 mb-2\">\n                                        <Scissors className=\"w-4 h-4 text-white dark:text-zinc-900\" />\n                                        <span className=\"text-xs font-medium text-zinc-400 dark:text-zinc-600 uppercase tracking-wider\">\n                                            Coupon\n                                        </span>\n                                    </div>\n                                    <div className=\"text-3xl font-bold text-white dark:text-zinc-900 tracking-tight mb-1\">\n                                        {generatedCouponCode}\n                                    </div>\n                                    <div className=\"text-sm text-zinc-300 dark:text-zinc-700 font-medium\">{companyName}</div>\n                                </div>\n                            </div>\n\n                            <div className=\"p-6 bg-white dark:bg-zinc-900\">\n                                <div className=\"text-center space-y-2\">\n                                    <div className=\"text-2xl font-bold text-zinc-900 dark:text-white\">{discount}% OFF</div>\n                                    <div className=\"text-sm text-zinc-600 dark:text-zinc-400\">\n                                        Valid until {endDate}\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"absolute left-0 top-1/2 transform -translate-y-1/2 w-6 h-6 bg-zinc-50 dark:bg-zinc-950 rounded-full -ml-3 border-2 border-zinc-200 dark:border-zinc-800\"></div>\n                            <div className=\"absolute right-0 top-1/2 transform -translate-y-1/2 w-6 h-6 bg-zinc-50 dark:bg-zinc-950 rounded-full -mr-3 border-2 border-zinc-200 dark:border-zinc-800\"></div>\n                        </div>\n                    </CardContent>\n\n                    <CardFooter className=\"flex justify-between items-center p-4 border-t border-border\">\n                        <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => setGenerated(false)}\n                            className=\"text-muted-foreground hover:text-foreground hover:bg-muted transition-colors\"\n                        >\n                            <ArrowLeft className=\"w-4 h-4 mr-1\" />\n                            Back\n                        </Button>\n                        <div className=\"flex gap-2\">\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => onCopy?.(generatedCouponCode)}\n                                className=\"border-border hover:bg-muted transition-colors bg-transparent\"\n                            >\n                                <Copy className=\"w-4 h-4 mr-1\" />\n                                Copy\n                            </Button>\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => onShare?.(generatedCouponCode)}\n                                className=\"border-border hover:bg-muted transition-colors bg-transparent\"\n                            >\n                                <Share2 className=\"w-4 h-4 mr-1\" />\n                                Share\n                            </Button>\n                        </div>\n                    </CardFooter>\n                </Card>\n            ) : (\n                <Card\n                    className={`w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-4 duration-700 \n                    bg-background text-foreground\n                    border border-border shadow-2xl \n                    ${cardClassName || \"\"}`}\n                >\n                    <CardHeader className=\"pb-4\">\n                        <CardTitle className=\"text-xl font-semibold text-center\">\n                            Create Coupon Code\n                        </CardTitle>\n                    </CardHeader>\n\n                    <div className=\"h-px bg-border mx-6\"></div>\n\n                    <CardContent className=\"space-y-6 p-6\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"discount\" className=\"text-sm font-medium\">\n                                    Discount (%)\n                                </Label>\n                                <Input\n                                    type=\"number\"\n                                    id=\"discount\"\n                                    value={discount}\n                                    onChange={handleDiscountChange}\n                                    min={0}\n                                    max={100}\n                                    className=\"bg-background border-border text-foreground\"\n                                />\n                                {discountError && (\n                                    <div className=\"text-sm text-red-500\">{discountError}</div>\n                                )}\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"applicable\" className=\"text-sm font-medium\">\n                                    Applicable to <span className=\"text-red-500\">*</span>\n                                </Label>\n                                <Select value={selectedRule} onValueChange={setSelectedRule}>\n                                    <SelectTrigger className=\"bg-background border-border text-foreground\">\n                                        <SelectValue placeholder=\"Select rule\" />\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        <SelectGroup>\n                                            <SelectLabel>Rules</SelectLabel>\n                                            {applicableOptions.map((option) => (\n                                                <SelectItem\n                                                    key={option.value}\n                                                    value={option.value}\n                                                    className=\"text-foreground hover:bg-muted\"\n                                                >\n                                                    {option.label}\n                                                </SelectItem>\n                                            ))}\n                                        </SelectGroup>\n                                    </SelectContent>\n                                </Select>\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-3\">\n                            <Label className=\"text-sm font-medium\">\n                                Validity Period <span className=\"text-red-500\">*</span>\n                            </Label>\n                            <div className=\"grid grid-cols-2 gap-3\">\n                                <div className=\"space-y-2\">\n                                    <Label htmlFor=\"start-date\" className=\"text-xs\">\n                                        Start Date\n                                    </Label>\n                                    <Input\n                                        type=\"date\"\n                                        id=\"start-date\"\n                                        value={startDate}\n                                        onChange={(e) => setStartDate(e.target.value)}\n                                        className=\"bg-background border-border text-foreground\"\n                                    />\n                                </div>\n                                <div className=\"space-y-2\">\n                                    <Label htmlFor=\"end-date\" className=\"text-xs\">\n                                        End Date\n                                    </Label>\n                                    <Input\n                                        type=\"date\"\n                                        id=\"end-date\"\n                                        value={endDate}\n                                        onChange={(e) => setEndDate(e.target.value)}\n                                        className=\"bg-background border-border text-foreground\"\n                                    />\n                                </div>\n                            </div>\n                            {dateError && (\n                                <div className=\"text-sm text-red-500 mt-2\">{dateError}</div>\n                            )}\n                        </div>\n\n                        <div className=\"space-y-3\">\n                            <div className=\"flex items-center space-x-3\">\n                                <Switch\n                                    id=\"custom-code\"\n                                    checked={enabled}\n                                    onCheckedChange={setEnabled}\n                                    className=\"data-[state=checked]:bg-zinc-900 data-[state=unchecked]:bg-zinc-200 dark:data-[state=checked]:bg-zinc-100 dark:data-[state=unchecked]:bg-zinc-700\"\n                                />\n                                <Label htmlFor=\"custom-code\" className=\"text-sm font-medium\">\n                                    Custom Code\n                                </Label>\n                            </div>\n                            {enabled && (\n                                <Input\n                                    className=\"bg-background border-border text-foreground\"\n                                    placeholder=\"DODO20\"\n                                    value={customCode}\n                                    onChange={(e) => setCustomCode(e.target.value)}\n                                />\n                            )}\n                        </div>\n                    </CardContent>\n\n                    <CardFooter className=\"flex justify-end p-6 pt-0\">\n                        <Button\n                            onClick={handleGenerate}\n                            disabled={!isFormValid}\n                            className={`bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 hover:bg-zinc-800 dark:hover:bg-zinc-200 transition-all duration-200 hover:scale-[1.02] shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:bg-zinc-900 dark:disabled:bg-zinc-100 ${generateButtonClassName || \"\"}`}\n                        >\n                            Generate Coupon\n                        </Button>\n                    </CardFooter>\n                </Card>\n            )}\n        </>\n    )\n}",
      "type": "registry:component",
      "target": "components/billingsdk/coupon.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/coupon-demo.tsx",
      "content": "\n\"use client\"\n\nimport {CouponGenerator} from \"@/registry/billingsdk/coupon\"\n\nfunction generateRandomCode(length = 8) {\n  const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\n  let result = \"\"\n  for (let i = 0; i < length; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return result\n}\n\nexport function CouponDemo() {\n  const handleGenerate = (couponData: {\n    code: string\n    discount: number\n    rule: string\n    startDate?: string\n    endDate?: string\n  }) => {\n    console.log(\"Generated Coupon:\", couponData)\n  }\n\n  const handleCopy = (code: string) => {\n    console.log(\"Copied Coupon Code:\", code)\n    navigator.clipboard.writeText(code)\n  }\n\n  const handleShare = (code: string) => {\n    console.log(\"Sharing Coupon Code:\", code)\n  }\n\n  return (\n    <div className=\"w-full flex justify-center items-center p-4 bg-background\">\n      <CouponGenerator\n        companyName=\"Dodopayments\"\n        applicableOptions={[\n          { label: \"For new users only\", value: \"new-users\" },\n          { label: \"For existing users only\", value: \"existing-users\" },\n          { label: \"For all users\", value: \"all-users\" },\n          { label: \"Premium subscribers\", value: \"premium-subscribers\" },\n        ]}\n        onGenerate={handleGenerate}\n        onCopy={handleCopy}\n        onShare={handleShare}\n        defaultCode={generateRandomCode()} \n      />\n    </div>\n  )\n}",
      "type": "registry:component",
      "target": "components/coupon-demo.tsx"
    }
  ]
}